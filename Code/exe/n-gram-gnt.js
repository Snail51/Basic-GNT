// MINIFIED VERSION OF THE FILE OF THE SAME NAME IN THE `src` FOLDER
// MINIFIED WITH https://www.toptal.com/developers/javascript-minifier
// MINIFIED AT Sat Apr 19 17:08:14 CDT 2025

import{Reader as t}from"./reader.js";import{Provider as r}from"./provider.js";export class GNT{constructor(){this.degree=3,this.corpusReader=new t("corpus"),this.corpus=[],this.vocab=[],this.counts=[]}async exe(){await this.buildcorpus(),await this.buildVocabulary(),await this.buildProbability()}async buildcorpus(){this.corpus=[];var t=await this.corpusReader.readSingleAsText();for(var r of t=(t=(t=(t=(t=(t=t.data).replace(/\s/g," ")).replace(/\./g," . ")).replace(/[^a-zA-Z0-9 \.]/g,"")).toLowerCase()).split(" "))""!=r&&this.corpus.push(r)}async buildVocabulary(){for(var t of(this.vocab=[],this.corpus))r(t,this.vocab)||this.vocab.push(t);function r(t,r){for(var s of r)if(s==t)return!0;return!1}}word2id(t){for(var r=0;r<this.vocab.length;r++)if(this.vocab[r]==t)return r;return -1}async buildProbability(){this.counts=[],this.coutns=function t(r,s){return 0===r?Array(s).fill(0):Array(s).fill().map(()=>t(r-1,s))}(3,this.vocab.length);for(var t=0;t<this.corpus.length-2;t++){var r=this.word2id(this.corpus[t]),s=this.word2id(this.corpus[t+1]),o=this.word2id(this.corpus[t+2]);this.counts[r][s][o]=this.counts[r][s][o]+1}for(var i of(this.rows=[],this.counts)){var a=0;for(var h of i)a+=h;this.rows.push(a)}this.prob=[],this.prob=Array(this.vocab.length).fill().map(()=>Array(this.vocab.length).fill(0));for(var e=0;e<this.vocab.length;e++)for(var c=0;c<this.vocab.length;c++)this.prob[e][c]=this.counts[e][c]/this.rows[e];alert("ready for synthesis")}get_next_word(t){var r=this.prob[this.word2id(t)],s=this.vocab,o=Math.random(),i=0;for(let a=0;a<r.length;a++)if((i+=r[a])>o)return s[a]}generate_text(t,r){var s=[];s.push(t);for(var o=0;o<r;o++){var i=this.get_next_word(s[s.length-1]);s.push(i)}for(var a of(document.getElementById("output").innerHTML+="",s))document.getElementById("output").innerHTML+=" "+a}}